function Hammer(e,t,n){function T(e){return e.touches?e.touches.length:1}function N(e){e=e||window.event;if(!S){var t=document,n=t.body;return[{x:e.pageX||e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t&&t.clientLeft||n&&t.clientLeft||0),y:e.pageY||e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t&&t.clientTop||n&&t.clientTop||0)}]}var r=[],i;for(var s=0,o=e.touches.length;s<o;s++)i=e.touches[s],r.push({x:i.pageX,y:i.pageY});return r}function C(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}function k(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function L(e,t){if(e.length==2&&t.length==2){var n=k(e[0],e[1]),r=k(t[0],t[1]);return r/n}return 0}function A(e,t){if(e.length==2&&t.length==2){var n=C(e[1],e[0]),r=C(t[1],t[0]);return r-n}return 0}function O(e,t){t.touches=N(t.originalEvent),t.type=e,F(r["on"+e])&&r["on"+e].call(r,t)}function M(e){e=e||window.event,e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0)}function _(){a={},l=!1,f=0,s=0,o=0,c=null}function P(n){function m(){a.start=N(n),p=(new Date).getTime(),f=T(n),l=!0,b=n;var t=e.getBoundingClientRect(),r=e.clientTop||document.body.clientTop||0,i=e.clientLeft||document.body.clientLeft||0,s=window.pageYOffset||e.scrollTop||document.body.scrollTop,o=window.pageXOffset||e.scrollLeft||document.body.scrollLeft;g={top:t.top+s-r,left:t.left+o-i},y=!0,D.hold(n)}var r;switch(n.type){case"mousedown":case"touchstart":r=T(n),x=r===1,r===2&&c==="drag"&&O("dragend",{originalEvent:n,direction:u,distance:s,angle:o}),m(),t.prevent_default&&M(n);break;case"mousemove":case"touchmove":r=T(n);if(!y&&r===1)return!1;!y&&r===2&&(x=!1,_(),m()),w=n,a.move=N(n),D.transform(n)||D.drag(n);break;case"mouseup":case"mouseout":case"touchcancel":case"touchend":var i=!0;y=!1,E=n,D.swipe(n);if(c=="drag")O("dragend",{originalEvent:n,direction:u,distance:s,angle:o});else if(c=="transform"){var d=a.center.x-a.startCenter.x,v=a.center.y-a.startCenter.y;O("transformend",{originalEvent:n,position:a.center,scale:L(a.start,a.move),rotation:A(a.start,a.move),distance:s,distanceX:d,distanceY:v}),T(n)===1&&(_(),m(),i=!1)}else x&&D.tap(b);h=c,O("release",{originalEvent:n,gesture:c,position:a.move||a.start}),i&&_()}}function H(t){B(e,t.relatedTarget)||P(t)}function B(e,t){!t&&window.event&&window.event.toElement&&(t=window.event.toElement);if(e===t)return!0;if(t){var n=t.parentNode;while(n!==null){if(n===e)return!0;n=n.parentNode}}return!1}function j(e,t){var n={};if(!t)return e;for(var r in e)r in t?n[r]=t[r]:n[r]=e[r];return n}function F(e){return Object.prototype.toString.call(e)=="[object Function]"}function I(e,t,n){t=t.split(" ");for(var r=0,i=t.length;r<i;r++)e.addEventListener?e.addEventListener(t[r],n,!1):document.attachEvent&&e.attachEvent("on"+t[r],n)}function q(e,t,n){t=t.split(" ");for(var r=0,i=t.length;r<i;r++)e.removeEventListener?e.removeEventListener(t[r],n,!1):document.detachEvent&&e.detachEvent("on"+t[r],n)}var r=this,i={prevent_default:!1,css_hacks:!0,swipe:!0,swipe_time:200,swipe_min_distance:20,drag:!0,drag_vertical:!0,drag_horizontal:!0,drag_min_distance:20,transform:!0,scale_treshold:.1,rotation_treshold:15,tap:!0,tap_double:!0,tap_max_interval:300,tap_max_distance:10,tap_double_distance:20,hold:!0,hold_timeout:500};t=j(i,t),function(){if(!t.css_hacks)return!1;var n=["webkit","moz","ms","o",""],r={userSelect:"none",touchCallout:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"},i="";for(var s=0;s<n.length;s++)for(var o in r)i=o,n[s]&&(i=n[s]+i.substring(0,1).toUpperCase()+i.substring(1)),e.style[i]=r[o]}();var s=0,o=0,u=0,a={},f=0,l=!1,c=null,h=null,p=null,d={x:0,y:0},v=null,m=null,g={},y=!1,b,w,E,S="ontouchstart"in window,x=!1;this.option=function(e,r){return r!==n&&(t[e]=r),t[e]},this.getDirectionFromAngle=function(e){var t={down:e>=45&&e<135,left:e>=135||e<=-135,up:e<-45&&e>-135,right:e>=-45&&e<=45},n,r;for(r in t)if(t[r]){n=r;break}return n},this.destroy=function(){S?q(e,"touchstart touchmove touchend touchcancel",P):(q(e,"mouseup mousedown mousemove",P),q(e,"mouseout",H))};var D={hold:function(e){t.hold&&(c="hold",clearTimeout(m),m=setTimeout(function(){c=="hold"&&O("hold",{originalEvent:e,position:a.start})},t.hold_timeout))},swipe:function(e){if(!a.move||c==="transform")return;var n=a.move[0].x-a.start[0].x,i=a.move[0].y-a.start[0].y;s=Math.sqrt(n*n+i*i);var f=(new Date).getTime(),l=f-p;if(t.swipe&&t.swipe_time>l&&s>t.swipe_min_distance){o=C(a.start[0],a.move[0]),u=r.getDirectionFromAngle(o),c="swipe";var h={x:a.move[0].x-g.left,y:a.move[0].y-g.top},d={originalEvent:e,position:h,direction:u,distance:s,distanceX:n,distanceY:i,angle:o};O("swipe",d)}},drag:function(e){var n=a.move[0].x-a.start[0].x,i=a.move[0].y-a.start[0].y;s=Math.sqrt(n*n+i*i);if(t.drag&&s>t.drag_min_distance||c=="drag"){o=C(a.start[0],a.move[0]),u=r.getDirectionFromAngle(o);var f=u=="up"||u=="down";if((f&&!t.drag_vertical||!f&&!t.drag_horizontal)&&s>t.drag_min_distance)return;c="drag";var h={x:a.move[0].x-g.left,y:a.move[0].y-g.top},p={originalEvent:e,position:h,direction:u,distance:s,distanceX:n,distanceY:i,angle:o};l&&(O("dragstart",p),l=!1),O("drag",p),M(e)}},transform:function(e){if(t.transform){var n=T(e);if(n!==2)return!1;var r=A(a.start,a.move),i=L(a.start,a.move);if(c==="transform"||Math.abs(1-i)>t.scale_treshold||Math.abs(r)>t.rotation_treshold){c="transform",a.center={x:(a.move[0].x+a.move[1].x)/2-g.left,y:(a.move[0].y+a.move[1].y)/2-g.top},l&&(a.startCenter=a.center);var o=a.center.x-a.startCenter.x,u=a.center.y-a.startCenter.y;s=Math.sqrt(o*o+u*u);var f={originalEvent:e,position:a.center,scale:i,rotation:r,distance:s,distanceX:o,distanceY:u};return l&&(O("transformstart",f),l=!1),O("transform",f),M(e),!0}}return!1},tap:function(e){var n=(new Date).getTime(),r=n-p;if(t.hold&&!(t.hold&&t.hold_timeout>r))return;var i=function(){if(d&&t.tap_double&&h=="tap"&&a.start&&p-v<t.tap_max_interval){var e=Math.abs(d[0].x-a.start[0].x),n=Math.abs(d[0].y-a.start[0].y);return d&&a.start&&Math.max(e,n)<t.tap_double_distance}return!1}();if(i)c="double_tap",v=null,O("doubletap",{originalEvent:e,position:a.start}),M(e);else{var o=a.move?Math.abs(a.move[0].x-a.start[0].x):0,u=a.move?Math.abs(a.move[0].y-a.start[0].y):0;s=Math.max(o,u),s<t.tap_max_distance&&(c="tap",v=n,d=a.start,t.tap&&(O("tap",{originalEvent:e,position:a.start}),M(e)))}}};S?I(e,"touchstart touchmove touchend touchcancel",P):(I(e,"mouseup mousedown mousemove",P),I(e,"mouseout",H))}(function(){"use strict";var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C={}.hasOwnProperty,k=function(e,t){function r(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};v=function(e){var t;return t={},function(n){return t[n]==null&&(t[n]=e(n)),t[n]}},N=function(e){var t;t="#"+e,window.location.hash!==t&&(window.location.hash=t),window.scrollTo(0,0),setTimeout(function(){return window.scrollTo(0,0)},0)},s=function(e,t){window.addEventListener(e,t)},i=function(e,t){document.addEventListener(e,t)},l=function(e,t){var n;t==null&&(t={}),n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!0,!0,t),document.dispatchEvent(n)},T=function(e){return e.replace(/^\#/,"")},w=function(){var e,t;return t=document.createElement("dummy").style,e=["Webkit","Moz","O","ms","Khtml"],v(function(n){var r,i,s,o;i=n.charAt(0).toUpperCase()+n.slice(1),r=[n].concat(e.map(function(e){return""+e+i}));for(s=0,o=r.length;s<o;s++){n=r[s];if(t[n]!=null)return n}})}(),a=function(e,t){var n,r;t==null&&(t=[]);for(n in t){if(!t.hasOwnProperty(n))continue;r=w(n),e.style[r]=t[n]}return e},b=function(e){return" perspective("+e+"px) "},f={scale:1,translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0}},S=function(e,t){var n,r,i;return i=e.translate,n=e.rotate,r=e.scale,t==null&&(t=!1),t?"scale("+1/r+")"+(" rotateZ("+ -n.z+"deg) rotateY("+ -n.y+"deg) rotateX("+ -n.x+"deg)")+(" translate3d("+ -i.x+"px,"+ -i.y+"px,"+ -i.z+"px)"):"translate3d("+i.x+"px,"+i.y+"px,"+i.z+"px)"+(" rotateX("+n.x+"deg) rotateY("+n.y+"deg) rotateZ("+n.z+"deg)")+(" scale("+r+")")},x=function(e,t){var n;return t==null&&(t=f),n={scale:Number(e.scale||1)*t.scale,translate:{x:Number(e.x||0)+t.translate.x,y:Number(e.y||0)+t.translate.y,z:Number(e.z||0)+t.translate.z},rotate:{x:Number(e.rotx||0)+t.rotate.x,y:Number(e.roty||0)+t.rotate.y,z:Number(e.rotz||0)+t.rotate.z}},n},d=!1,E=null,u=null,t=function(){function r(r,i){this.el=r,this.parent=i!=null?i:null,this.data=this.el.dataset,this.transform=x(this.data),this.el.id||(this.el.id="mosho-element-"+n),this.id=this.el.id,a(this.el,{position:"absolute",display:"block",transformStyle:"preserve-3d"}),this.updateCss(),this.order=n++,e[this.id]=this,t.push(this);return}var e,t,n;return n=0,e={},t=[],r.prototype.show=function(e){var t;return e==null&&(e=null),typeof e=="string"&&(t=this.getById(e))!=null?t.show():!1},r.prototype.getById=function(t){return e[t]},r.prototype.getByOrder=function(e,n){var r;n==null&&(n=!1),r=t.length-1,n&&(e+=this.order);while(e>r)e-=t.length;while(e<0)e+=t.length;return t[e]},r.prototype.getTransformList=function(){var e,t;return e=[this.transform].concat(((t=this.parent)!=null?t.getTransformList():void 0)||[]),e},r.prototype.buildTotalTransform=function(){var e,t,n;n=this.getTransformList(),t={scale:1,translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0}};while((e=n.shift())!=null)t.scale*=e.scale,t.translate.x+=e.translate.x,t.translate.y+=e.translate.y,t.translate.z+=e.translate.z,t.rotate.x+=e.rotate.x,t.rotate.y+=e.rotate.y,t.rotate.z+=e.rotate.z;return t},r.prototype.buildCssTransform=function(e){return e==null&&(e=!1),S(this.buildTotalTransform(),e)},r.prototype.updateCss=function(){return a(this.el,{transform:this.buildCssTransform()})},r.prototype.translate=function(e,t,n,r){e==null&&(e=0),t==null&&(t=0),n==null&&(n=0),r==null&&(r=!1),r?this.transform.translate={x:e,y:t,z:n}:(this.transform.translate.x+=e,this.transform.translate.y+=t,this.transform.translate.z+=n),this.updateCss()},r.prototype.rotate=function(e,t,n,r){r==null&&(r=!1),r?this.transform.rotate={x:e,y:t,z:n}:(this.transform.rotate.x+=e,this.transform.rotate.y+=t,this.transform.rotate.z+=n),this.updateCss()},r.prototype.scale=function(e,t){e==null&&(e=1),t==null&&(t=!1),t?this.transform.scale=e:this.transform.scale*=e,this.updateCss()},r}(),r=function(e){function t(e,r){var i;this.el=e,this.parent=r!=null?r:null,t.__super__.constructor.call(this,this.el,this.parent),i=this,this.children=function(){var r,s,o,u,a,f;o=this.el.childNodes,f=[];for(r=0,s=o.length;r<s;r++)e=o[r],(e!=null?(u=e.classList)!=null?u.contains("mosho-slide"):void 0:void 0)?f.push(new n(e,i)):(e!=null?(a=e.classList)!=null?a.contains("mosho-group"):void 0:void 0)?f.push(new t(e,i)):f.push(void 0);return f}.call(this)}return k(t,e),t.prototype.updateCss=function(){},t.prototype.show=function(e){return t.__super__.show.call(this,e)?!0:this.getByOrder(1,!0).show()},t}(t),e=function(e){function t(e){this.el=e,t.__super__.constructor.call(this,this.el,null),a(this.el,{position:"absolute",transformOrigin:"0% 0%",transformStyle:"preserve-3d"})}return k(t,e),t.prototype.updateCss=function(){},t}(r),n=function(e){function i(e,t){this.el=e,this.parent=t!=null?t:null,this.el.classList.add("mosho-inactive"),this.slidesOrder=n++,r.push(this),i.__super__.constructor.call(this,this.el,this.parent),this.updateCss()}var t,n,r;return k(i,e),t=null,r=[],n=0,i.prototype.show=function(e){var n;return i.__super__.show.call(this,e)?!0:this===this.getActiveSlide()?!0:(n=this.getActiveSlide(),l("mosho:enter:"+this.id),n!=null&&l("mosho:leave:"+n.id),l("mosho:pre-show",{prevSlide:n,nextSlide:this}),t=this,N(this.id),n!=null&&n.el.classList.remove("mosho-active"),n!=null&&n.el.classList.add("mosho-inactive"),this.el.classList.remove("mosho-inactive"),this.el.classList.add("mosho-active"),a(u.el,{transform:this.buildCssTransform(!0),transition:"all "+(this.data.transition||"1s ease")}),l("mosho:post-show",{prevSlide:n,nextSlide:this}),!0)},i.prototype.getActiveSlide=function(){return t},i.prototype.getPrevSlide=function(){return this.data.prev!=null?this.getById(this.data.prev):r[this.slidesOrder===0?r.length-1:this.slidesOrder-1]},i.prototype.getNextSlide=function(){return this.data.next!=null?this.getById(this.data.next):r[this.slidesOrder===r.length-1?0:this.slidesOrder+1]},i.prototype.updateCss=function(){return a(this.el,{transform:"translate(-50%,-50%) "+this.buildCssTransform()})},i}(t),c=function(){if(d)return;l("mosho:pre-init"),E=document.createElement("div"),E.id="mosho-container",a(document.body,{height:"100%",overflow:"hidden"}),a(E,{position:"absolute",transformOrigin:"0% 0%",transition:"all 0s ease-in-out",top:"50%",left:"50%",transform:b(4e3),transformStyle:"preserve-3d"}),u=document.getElementById("mosho"),u.id="mosho-camera",u=new e(u),document.body.appendChild(E),E.appendChild(u.el),u.show(T(window.location.hash))||u.getByOrder(0).show(),h(),p(),d=!0,l("mosho:post-init")},p=function(){var e;e=new Hammer(document.documentElement),e.onswipe=function(e){e.direction==="left"&&m.next(),e.direction==="right"&&m.prev()}},h=function(){s("hashchange",function(){return n.prototype.getById(T(window.location.hash)).show()}),i("keydown",function(e){switch(e.keyCode){case 37:case 38:case 9:case 32:case 39:case 40:e.preventDefault()}}),i("keyup",function(e){switch(e.keyCode){case 37:case 38:return m.prev(),e.preventDefault();case 9:case 32:case 39:case 40:return m.next(),e.preventDefault()}})},g=function(e,t){i("mosho:enter:"+e,t)},y=function(e,t){i("mosho:leave:"+e,t)},o=function(e){var t;(t=e.name)==null&&(e.name="Anonymous Plugin"),d&&console.warn("plugin '"+e.name+"' attached after Mosho.init()"),typeof e.preJump=="function"&&i("mosho:pre-init",e.preinit),typeof e.postInit=="function"&&i("mosho:post-init",e.postInit),typeof e.preShow=="function"&&i("mosho:pre-show",e.preShow),typeof e.postShow=="function"&&i("mosho:post-show",e.postShow)},m=window.mosho={init:c,prev:function(){return n.prototype.getActiveSlide().getPrevSlide().show()},next:function(){return n.prototype.getActiveSlide().getNextSlide().show()},show:function(e){return t.prototype.getById(e).show()},getElement:function(e){return e!=null?t.prototype.getById(e):n.prototype.getActiveSlide()},enter:g,leave:y,plugin:o}}).call(this)